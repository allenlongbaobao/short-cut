!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("short-cut",[],e):"object"==typeof exports?exports["short-cut"]=e():t["short-cut"]=e()}(self,(function(){return(()=>{"use strict";var t={22:function(t,e,n){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=n(743),i=n(541);n(188);var s=function(){function t(e){var n=this;if(this.render=i.default,this.kvDownMap=new Map,this.kvUpMap=new Map,this.keyValueMap={DELETE:127,ENTER:13,BACKSPACE:8,CTRL:17,ALT:18,SPACE:32},this.option={preventDefault:!0},e&&(this.option=e),t.instance)return t.instance;window.onbeforeunload=function(t){t.preventDefault(),t.returnValue=""},document.addEventListener("keydown",(function(t){n.handlerKeyUpOrDown(t,n.kvDownMap)})),document.addEventListener("keyup",(function(t){n.handlerKeyUpOrDown(t,n.kvUpMap,!1)})),t.id++}return t.prototype.on=function(t,e,n){this.kvDownMap.set(this.checkKeyExist(t,this.kvDownMap),e),n&&this.kvUpMap.set(this.checkKeyExist(t,this.kvUpMap),n)},t.prototype.showInstruction=function(){this.render.showIns(this.kvDownMap)},t.prototype.handlerKeyUpOrDown=function(t,e,n){var o,i;void 0===n&&(n=!0);var s=e.keys(),a=this.option.preventDefault;try{for(var c=r(s),u=c.next();!u.done;u=c.next()){var d=u.value,f=d.showTip,l=void 0===f||f;if(this.checkKeyMatch(t.keyCode,d)){if(!this.checkAssistKeyMatch(d,t))return;a&&t.preventDefault();var h=e.get(d);n&&l&&this.render.show(this.getContent(d)),h&&h()}}}catch(t){o={error:t}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}},t.prototype.getContent=function(t){var e=t.meta,n=t.ctrl,r=t.shift,i=t.content,s=void 0===i?"":i;return(n?"Ctrl + ":"")+(e?"command + ":"")+(r?"Shift + ":"")+" "+o.getKeyLetter(t)+" "+s},t.prototype.checkKeyExist=function(t,e){var n,o;try{for(var i=r(e.keys()),s=i.next();!s.done;s=i.next()){var a=s.value,c=a.key,u=a.alt,d=a.ctrl,f=a.shift,l=a.code,h=a.content;if(l===t.code&&c===t.key&&u===t.alt&&d===t.ctrl&&f===t.shift&&h===t.content)return a}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return t},t.prototype.checkKeyMatch=function(t,e){var n=e.key,r=e.code;return n?t===n.toUpperCase().charCodeAt(0):t===r},t.prototype.checkAssistKeyMatch=function(t,e){var n,o,i=e.metaKey,s=e.ctrlKey,a=e.shiftKey,c=t.assistArray;if(c&&c.length){try{for(var u=r(c),d=u.next();!d.done;d=u.next()){var f=d.value,l=f.ctrl,h=f.meta,p=f.shift;if(!!l===s&&!!h===i&&!!p===a)return!0}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return!1}l=t.ctrl,h=t.meta,p=t.shift;return!!l===s&&(!!h===i&&!!p===a)},t.id=0,t.instance=new t,t}();window.shortCut=new s,e.default=s},541:function(t,e,n){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=n(743),i=new(function(){function t(){this.initThumb(),this.initInstruction()}return t.prototype.show=function(t){var e=this;this.timeout&&clearTimeout(this.timeout),this.dom.classList.remove("show"),setTimeout((function(){e.dom.innerHTML=t,e.dom.classList.add("show")}),100),this.timeout=setTimeout((function(){e.dom.classList.remove("show")}),2e3)},t.prototype.initThumb=function(){this.dom=window.document.createElement("div"),this.dom.innerHTML="",window.document.body.appendChild(this.dom),this.dom.classList.add("short-cut")},t.prototype.initInstruction=function(){var t=this;this.instructionDom=window.document.createElement("div"),this.instructionDom.innerHTML="<div class='sc-block'></div>",window.document.body.appendChild(this.instructionDom),this.instructionDom.classList.add("sc-instruction"),this.instructionDom.addEventListener("click",(function(){t.instructionDom.classList.remove("show")}))},t.prototype.showIns=function(t){var e=this.genInstructorData(t),n=document.querySelector(".sc-block");this.instructionDom.classList.add("show");var r=e.map((function(t){var e=t.keys;return'<div class="sc-record"><div class="sc-record-content">'+t.content+'</div>: <div class="sc-record-keys"> '+(Array.isArray(e[0])?e.map((function(t){return t.join(" + ")})).join(" | "):e.join(" + "))+" </div> </div>"})).join("");n.innerHTML=r},t.prototype.genInstructorData=function(t){var e,n,i=this,s=[],a=function(t){var e=t.content,n=void 0===e?"未命名":e,r=t.assistArray,a={content:n,keys:[]},u=o.getKeyLetter(t).toUpperCase();r?r.length>1?a.keys=r.map((function(t){return i.genAssistKeys(t).concat([u])})):0===r.length&&(a.keys=c.genAssistKeys(r[0]).concat([u])):a.keys=c.genAssistKeys(t).concat([u]),s.push(a)},c=this;try{for(var u=r(t.keys()),d=u.next();!d.done;d=u.next()){a(d.value)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return console.log(s),s},t.prototype.genAssistKeys=function(t){var e=t.ctrl,n=t.meta,r=t.shift,i=t.alt,s=t.caps,a=[];return e&&a.push("Ctrl"),n&&a.push("Mac"===o.detectOS()?"Command":"Win"),r&&a.push("Shift"),i&&a.push("Alt"),s&&a.push("Caps"),a},t}());e.default=i},743:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.detectOS=e.getKeyLetter=void 0,e.getKeyLetter=function(t){var e=t.key,n=t.code;return e||(n?String.fromCharCode(n):"")},e.detectOS=function(){var t=navigator.userAgent,e="Win32"==navigator.platform||"Windows"==navigator.platform,n="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(n)return"Mac";if("X11"==navigator.platform&&!e&&!n)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(e){if(t.indexOf("Windows NT 5.0")>-1||t.indexOf("Windows 2000")>-1)return"Win2000";if(t.indexOf("Windows NT 5.1")>-1||t.indexOf("Windows XP")>-1)return"WinXP";if(t.indexOf("Windows NT 5.2")>-1||t.indexOf("Windows 2003")>-1)return"Win2003";if(t.indexOf("Windows NT 6.0")>-1||t.indexOf("Windows Vista")>-1)return"WinVista";if(t.indexOf("Windows NT 6.1")>-1||t.indexOf("Windows 7")>-1)return"Win7"}return"other"}},188:(t,e,n)=>{n.r(e)}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}return n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(22)})()}));